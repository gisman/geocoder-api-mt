# TODO

## 건물 검색 [TODO]

건물명은 별칭이 많으므로 최대한 단순화 시키는 hash 사용중.
hash 충돌 발생시 원본 list에서 가장 유사한 건물명을 찾기

충돌이 생기는 샘플 주소 필요

## 건물동 검색

지번주소에 건물동 추가. 새주소를 잘 찾으려면 건물동을 알아야 함.

- [X] 건물동을 단순화 hash로 저장하고, 검색
잘 못 찾는다. "서울 관악구 관악로 1 서울대학교 문화관"

## 지하 검색 [TODO]

지하 표기를 빼고 주소를 적는 경우가 많다.

예) 인천광역시 미추홀구 구월로 지하 19 => 인천광역시 미추홀구 구월로 19

"지하"를 제외한 key로 검색. 같은 건물번호에 지상과 지하가 같이 있는지 검사

지하 주소에 대해, 지상 주소가 없으면 지상 주소를 추가. 
지상 주소가 있으면 구분되어야 하므로 지하만 추가.

Query를 한 번 더 해야겠다.

## 상세주소DB 활용 [TODO]

상세주소란, 도로명주소의 건물번호 뒤에 표시되는 동·층·호 정보로, 2가구 이상 거주하는 원룸·다가구주택·단독주택에 부여합니다.

건물번호와 층/호를 붙여 쓰는 주소를 처리하기 위한 기능 개발에 활용.
호 표기의 패턴을 분석하면 "영등포로62가길 4-4301호"를 "4-4 301호"로 처리할 수 있게 될 것

## 대표좌표 부여

단지의 대표 좌표는 건물 좌표가 아니다.
단지 지적의 중심점으로 한다.
지적이 여러개이면 그 중심점으로 한다.

## 정제율 개선

### 필수test.txt 참고

### 번지-호 or 번지 건물호수

> 경기도 오산시 갈곶동 259번지   102호
> 경기도 오산시 원동 807번지   206호

사람이 봐도 두가지로 해석 할 수 있다. 확률적으로 판단하거나 둘 다 시도.

확률적 판단:
건물의 호수 패턴이면 건물호수일 가능성이 높다.
1자리 또는 3자리 숫자. 그 외 2, 4자릿수 등은 건물호수 가능성 낮음
3자리일때 가운데 수는 0이어야 함. 그 외는 건물호수 가능성 낮음

### EXTRA 활용 검색

KEY 생성 실패나 검색 실패시 EXTRA를 이용하여 다시 검색

> 서울 종로구 창덕궁 1길, 4?5층(원서빌딩)
> 종로구_창덕궁1길_4-0
> ROAD_ADDRESS
> H1      서울
> H23     종로구
> ROAD    창덕궁1길
> COMMA   ,
> 건번    4
> COMMA   ?
> FLOOR   5층
> EXTRA   ( 원서빌딩 )

실패하는 주소지만 창덕궁1길에 원서빌딩 있음. 도로명+건물명(서울 종로구 창덕궁 1길 원서빌딩)으로 검색하면 성공.
EXTRA용 Parser를 만들어 건물명을 분리하면 가능.

# 검색 DB 개선

CreateLevelDb
delete and push 가 아니라 search and merge

# 정제율 개선

## 시군구 오타

> 경상북도 양덕군 남정면 진불길 43

'영덕군' '양덕군' 오타

시군구 오타는 잡기 어렵다. "남정면 진불길" 또는 "경상북도 진불길"을 만들면 가능.
길이름이 unique 할 수도 있으니 "진불길_43-0"도 가능

## update 자동화

### 일일 업데이트

[[juso.go.kr에서 일 변동분 받아서 airflow batch 처리]](https://www.juso.go.kr/addrlink/devAddrlinkUpdateInfo.do)
