## DOC

빅데이터용 지오코딩 솔루션

ERD: https://www.erdcloud.com/d/cCDus2uY268g63wcb

## TODO

### data

- [ ] 지하 도로명주소
- [ ] 번지 이하 건물명 검색
- [ ] 폐지된 주소 검색 및 현행화
- [ ] 참조 데이터 업데이트 자동화
- [ ] 자동 업데이트
- [ ] 연속 지적도의 지번 추가(새주소가 아닌 지번) http://data.nsdi.go.kr/dataset/12771
      행정동 코드를 부여해야 하는데 행정동 영역 만드는게 보통일이 아니다. 진짜 어렵다.
      오픈소스 행정경계를 사용: https://github.com/vuski/admdongkor
- [ ] h1, h2 생략 주소. 상위 주소 생략하면 hash 충돌 발생할 것. 상위 주소 판별 위한 정보 포함한 list로 data 구성 필요
- [ ] 
- [ ] 
- [ ] 

### service

- [ ] 속도를 자랑할 수 있는 기획
- [ ] 실패 사유 출력
- [X] 멀티쓰레드 동작. Flask는 멀티 프로세스라서 충돌 있다. apache2 때문일수도 있다.
- [ ] reverse geocoding. 지적도와 postgis로 지번주소 검색 후 주소정제 태워서 새주소 얻어내기. 표준을 따를 것
- [ ] 사용 Log. 건수와 성공율, 성능, {Daily, Monthly, Total}
- [ ] 
- [ ] 

### plugin

- [ ] API, API 명세
- [ ] QGIS Plugin
- [ ] Python package
- [ ] R package
- [ ] leaflet geocoding
- [ ] leaflet reverse geocoding
- [ ] 
- [ ] 

## 수익 모델

- [ ] key 방식으로 건수 제한
- [ ] 가격과 속도로 차별화
- [ ] 검색엔진 등록
- [ ] 솔루션 판매
- [ ] 오픈소스?
- [ ] 
- [ ] 

###  위치정보요약DB 활용 검토
  geocode.tbentrc 6,296,700건

  도로명주소와 주출입구의 위치 값이 매핑된 위치정보요약 자료입니다

  건수가 적다. 도로명주소 당 1개의 위치 값이다.
  
  건물 매칭 실패시 대표좌표로 쓸 수 있지 않을까?


## 버전

### Ver 0.1 (2020.08.25)

* 건물번호, 지번 검색 기능 (건물명 무시)
* 내비게이션 데이터 기준 새주소, 지번주소, 관련지번 검색
* 광역시도 명칭, 건물번호/번지부 해싱
* 띄어쓰기 오류 처리

#### 주소 유형

* 길이름 건물번호
* 길이름 건물번호 단지 건물
* 길이름 건물번호 건물

* 법정동 번지 단지 건물
* 법정동 번지 단지
* 법정동 번지 건물
* 법정동 번지(x) 건물
* 법정동 번지

* 행정동 번지 단지 건물
* 행정동 번지 단지
* 행정동 번지 건물
* 행정동 번지(x) 건물
* 행정동 번지

## 주소 체계에 대한 이해가 부족했다.

* 새주소와 지번은 단순한 관계가 아니다. 새주소는 건물까지 찾아야 하는 것이다.
  * hash key는 건물명을 포함해야 한다.
  * 건물군이 아니면 건물명 빠진 hash key를 쓸 수 있다.
  * 건물명을 못 찾으면 대표 지번주소나 대표 새주소를 찾아야 하는데, 대표가 불분명하다. 건물명 비교 실패하면 어느 건물의 좌표가 될 지 알 수 없다.
* 새주소엔 건물번호가 항상 있음
* 새주소엔 지하 포함

## hash 데이터 셋

1. 건물명 포함한 새주소 (건물수 5 이상)
1. 건물명 포함한 지번주소 (건물수 5 이상)
1. 지번 누락, 건물명 지번 주소
1. 진입점 좌표 취급 안 함
1. 불완전 주소: 광역시주소, 시군구주소, 행정동주소, 법정동주소, 리주소, 대표건물주소, 정확한주소

## 실패 원인 코드

- [ ] 0: 성공
- [ ] 1: 주소 없음
- [ ] 2: 주소 형식 오류
- [ ] 3: 주소 불완전
- [ ] 4: 주소 불일치
- [ ] 5: 주소 중복

-[] ## 3차 행정구역 생략 주소의 처리

실패: 충청남도 천안시 병천면 충절로 1729
성공: 충청남도 천안시 동남구 병천면 충절로 1729